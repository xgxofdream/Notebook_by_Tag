{% include "head.html" %}
{% include "menu.html" %}

<script>
//复选框的自动勾选；details列表的自动展开
    window.onload = function () {

        {% for key, value in statistics_tag.items %}
            document.getElementById("{{ key }}").checked = "checked";
        {% endfor %}

        {% for key, value in statistics_tag.items %}
            {% for item in all_tag_list %}
                {% if item.name == key %}
                    document.getElementById("{{ item.sub01 }}").open = true;
                {% endif %}
            {% endfor %}
        {% endfor %}
    }

</script>




</script>


<p style="font-weight: bold; text-align: center">**********************笔记的原始信息**********************</p>

<table>

    <tr>
        <td style="font-weight: bold">Source</td>
        <td>
            <p style="">
                |&nbsp&nbsp<a href="{{ web_url }}english/source_list/{{ source.type }}/">{{ source.type }}</a>&nbsp&nbsp
                |&nbsp&nbsp<a href="{{ web_url }}english/list_by_source/{{ source.id }}/">{{ source.name }}</a>&nbsp
                ({{ reference_current.english_text_location }})&nbsp
                |&nbsp&nbspID:&nbsp<a href="{{ web_url }}english/detail/{{ english.id }}/">{{ english.id }}</a>&nbsp&nbsp|
            </p>
        </td>
    </tr>

    <tr>
        <td style="font-weight: bold">Text</td>
        <td style="font-size: 30px;">

            {% for key, value in english_dict.items %}

                {{ value.english_text|safe }}

            {% endfor %}

        </td>
    </tr>
    <tr>
        <td style="font-weight: bold; vertical-align: middle">Analysis</td>
        <td>
            {% for key, value in statistics_tag.items %}


                {{ key }}:&nbsp&nbsp{{ value.2 }}<br>


            {% endfor %}

        </td>
    </tr>

    <tr>
        <td style="font-weight: bold">Element</td>
        <td>|&nbsp
            {% for item in element2 %}

            {{ item.text }}&nbsp|&nbsp

            {% endfor %}

        </td>
    </tr>

    <tr>
        <td style="font-weight: bold">Notes</td>
        <td>
            {{ english.note }}

        </td>
    </tr>


</table>
<br>

<p style="font-weight: bold; text-align: center">**********************更新这条英语笔记**********************</p>

<form action="{{ web_url }}english/submit_update/{{ english.id }}/" method="post"> {% csrf_token %}


    <table>

        <tr>
            <td style="text-align: center">
                <p style="font-weight: bold">>>位置<<</p>


                {% for item in reference_range %}

                    {% if forloop.first %}
                        <input type="radio" name="reference" checked="checked" value="{{ item.id }}"/>
                        -
                        {{ item.english_text_location }}&nbsp&nbsp
                    {% else %}<input type="radio" name="reference" value="{{ item.id }}"/>-
                        {{ item.english_text_location }}
                        &nbsp&nbsp
                    {% endif %}
                {% endfor %}
            </td>
        </tr>

        <tr>
            <td style="text-align: center">
                <p style="font-weight: bold">>>正文<<</p>
                <textarea style="font-size: 20pt" id=" " name="english_text" rows="6"
                          cols="100">{{ english.english_text }}</textarea>
                <br><br>
            </td>
        </tr>
        <tr>
            <td style="text-align: center">
                <p style="font-weight: bold">>>Note:<<</p>
                <textarea style="font-size: 20pt" id=" " name="note" rows="4" cols="100">{{ english.note }}</textarea>
                <br><br>
            </td>
        </tr>
        <tr>
            <td style="width:100%">
                {% for key, value in tag_dict.items %}

                    <span style="font-weight: bold; font-size: 16pt">{{ key }}:&nbsp</span>
                    <br><br>
                    {% for list_item in value %}
                        <details id="{{ list_item }}" style="display: inline-block;vertical-align: text-top;">

                            <summary style="font-style: italic; font-weight: bold">{{ list_item }}</summary>

                            {% for item in all_tag_list %}

                                {% if item.root == key %}

                                    {% if item.sub01 == list_item %}

                                        <input type="checkbox" name="tag_list" id="{{ item.name }}"
                                               value="{{ item.id }}"/>-
                                        {{ item.name }}&nbsp&nbsp&nbsp

                                        {% if item.sub01 != '学术类' and item.sub01 != '专业类' and item.sub01 != '语法类' %}
                                            <input style="width:1600px; height:30px; font-size: 20pt;text-align: left"
                                                   type="text"
                                                   name="{{ item.id }}"
                                                   id="{{ item.id }}"
                                                   onchange="{this.value == '' ? document.getElementById('{{ item.name }}').checked='': document.getElementById('{{ item.name }}').checked='checked'}"
                                                   value="{% for key, value in statistics_tag.items %}{% if key == item.name %}{{ value.2 }}{% endif %}{% endfor %}"/>



                                        {% else %}
                                            <input type="hidden" name="{{ item.id }}" value=""/>

                                        {% endif %} <br>

                                    {% endif %}

                                {% endif %}

                            {% endfor %}
                        </details>
                        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    {% endfor %}
                    <br><br>
                    <p style="text-align: center">
                        ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</p>
                    <br><br>

                {% endfor %}
            </td>

        </tr>
        <tr>
            <td>
                <p style="font-weight: bold; text-align: center">**********************<input type="submit"
                                                                                              value="Submit"/>**********************
            </td>
        </tr>
    </table>


</form>
{% include "foot.html" %}